Summary: MATE Software Update Applet 
Name: mate-applet-softupd
Version: @PACKAGE_VERSION@ 
Release: 1
Group: System
License: GPL
Source: http://bilbo.online.bg/~assen/mate-applet/mate-applet-softupd-@PACKAGE_VERSION@.tar.gz
BuildRoot: /var/tmp/%{name}-buildroot
Requires: mate-panel >= 1.3.0, libmatenotify >= 1.2.0
BuildRequires: gettext

%description
Software updtes notification applet for the MATE desktop environment.
Supports YUM and APT (backend chosen at compile time).

%prep
# Commented out to enable building RPM from local source tree
#%setup -q

%build
./configure @ORIG_CMDLINE_ARGS@ 
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT@LIBEXECDIR@/mate-panel
mkdir -p $RPM_BUILD_ROOT@PIXMAPDIR@
mkdir -p $RPM_BUILD_ROOT@ICONSDIR@/hicolor/16x16/apps
mkdir -p $RPM_BUILD_ROOT@ICONSDIR@/hicolor/22x22/apps
mkdir -p $RPM_BUILD_ROOT@ICONSDIR@/hicolor/24x24/apps
mkdir -p $RPM_BUILD_ROOT@ICONSDIR@/hicolor/32x32/apps
mkdir -p $RPM_BUILD_ROOT@DATAROOTDIR@/mate-panel/applets
mkdir -p $RPM_BUILD_ROOT@DATAROOTDIR@/dbus-1/services

for DIR in `find po/ -maxdepth 1 -mindepth 1 -type d | sed s/po.//g`; do
	mkdir -p $RPM_BUILD_ROOT@LOCALEDIR@/$DIR/LC_MESSAGES
done

make install DESTDIR=$RPM_BUILD_ROOT

%find_lang softupd

%post
gtk-update-icon-cache -f -t @ICONSDIR@/hicolor

%clean
rm -rf $RPM_BUILD_ROOT

%files -f softupd.lang
%defattr(-,root,root)
%doc README TODO LICENSE CHANGES AUTHOR BUGS

@LIBEXECDIR@/mate-panel/softupd_applet
@PIXMAPDIR@/applet_softupd_on.png
@PIXMAPDIR@/applet_softupd_off.png
@ICONSDIR@/hicolor/16x16/apps/applet_softupd.png
@ICONSDIR@/hicolor/22x22/apps/applet_softupd.png
@ICONSDIR@/hicolor/24x24/apps/applet_softupd.png
@ICONSDIR@/hicolor/32x32/apps/applet_softupd.png
@DATAROOTDIR@/mate-panel/applets/org.mate.applets.SoftupdApplet.mate-panel-applet
@DATAROOTDIR@/dbus-1/services/org.mate.panel.applet.SoftupdApplet.service

%changelog
* Sun Dec 2 2012 Assen Totin <assen.totin@gmail.com>
- Release 0.2.3

* Fri Jul 27 2012 Assen Totin <assen.totin@gmail.com>
- Release 0.2.2

* Thu Jul 12 2012 Assen Totin <assen.totin@gmail.com>
- Release 0.1.0

* Wed Jun 27 2012 Assen Totin <assen.totin@gmail.com>
- Release 0.0.1

